# 実装計画書：AI採用候補者評価アプリ（テキスト入力・設定外部化版） Ver.1.2

## 1. プロジェクト概要 (変更なし)
...
## 1.3. 採用技術スタック（想定）(更新)
*   **バックエンド:** Python + Flask
    *   主要ライブラリ: `google-generativeai`, `Flask`, `python-dotenv`, `pandas`, `markdown`, **`Flask-CORS`**, **`gunicorn`**
*   **フロントエンド:** React + Tailwind CSS
    *   主要ライブラリ: `axios`, **`tailwindcss`, `postcss`, `autoprefixer`**
*   **AI:** Google Gemini API (gemini-2.5-pro-exp-03-25 など)
*   ... (他は変更なし)

## 2. 開発体制 (変更なし)
...
## 3. 開発環境 (変更なし)
...
## 4. 実装スケジュール（実績と今後）

| フェーズ | 名称                             | 状況     | 主要タスク                                                                                                                                   |
| :------- | :------------------------------- | :------- | :----------------------------------------------------------------------------------------------------------------------------------------- |
| 1        | 基盤構築とコア機能(BE)         | ✅完了   | プロジェクトセットアップ(BE), Gemini連携, `/evaluate` API雛形                                                                                 |
| 2        | フロントエンド基本UIと連携       | ✅完了   | プロジェクトセットアップ(FE), テキスト入力, 解析ボタン, API疎通                                                                              |
| 3        | BE: コア機能実装             | ✅完了   | テキストクレンジング, Gemini評価実装(JSON取得), スコア計算ロジック (`scoring_service`), API応答構造最終化 (`gemini_evaluation`, `calculated_scores`) |
| 4        | FE: 結果表示とUI改善(基本)   | ✅完了   | `EvaluationDetails`コンポーネント作成・テーブル表示, Tailwind CSS導入, マッチングアプリ風レイアウト適用(デフォルト色), スコア表示                 |
| 5        | BE/FE: 複数結果・エクスポート    | ✅完了   | FE: 結果リスト累積保持・表示, エクスポートUI, API呼び出し, ファイルダウンロード<br>BE: `/export` API実装, CSV/MD生成ロジック (`export_utils`) |
| 6        | BE: 設定外部化                 | ✅完了   | プロンプト、スコアリング設定を `config.py` に移動。各モジュールから参照するように修正。                                                         |
| 7        | **BE/FE: デプロイ準備と実行**    | 進行中   | **BE:** gunicorn, Flask-CORS導入, Procfile作成, CORS設定<br>**FE:** API URL環境変数化<br>**共通:** Git準備, **Renderへのデプロイ作業**            |
| 8        | **UI/UX のさらなる改善 (今後)** | 未着手   | UIライブラリ導入検討, レスポンシブ対応, 詳細なローディング/エラーステート表示                                                              |
| 9        | **機能強化・安定化 (今後)**    | 未着手   | エラーハンドリング強化, クレンジングルール改善, プロンプトチューニング, テストコード拡充                                                       |
| 10       | **ドキュメント最終化 (今後)**    | 未着手   | README, 各種設計書の最終レビュー・更新                                                                                                     |

*(注: 各フェーズの期間目安は省略。実績に基づきレビュー)*

## 5. タスク詳細（WBS簡易版 - 今後の例）

| ID      | フェーズ | タスク内容                                                                  | 担当   | 見積(人日) | 依存タスク | 備考                                                                    |
| :------ | :------- | :-------------------------------------------------------------------------- | :----- | :--------- | :--------- | :---------------------------------------------------------------------- |
| **DEP-01**| 7        | Render アカウント作成・GitHub連携                                            | Dev    | 0.2        | -          |                                                                         |
| DEP-02  | 7        | Render: バックエンド Web Service 作成・設定 (ビルド/スタートコマンド、ルート)   | Dev    | 0.5        | DEP-01     |                                                                         |
| DEP-03  | 7        | Render: バックエンド 環境変数設定 (GEMINI_API_KEY, PYTHON_VERSION)           | Dev    | 0.2        | DEP-02     | FRONTEND_URL は後で                                                      |
| DEP-04  | 7        | Render: フロントエンド Static Site 作成・設定 (ビルド/公開ディレクトリ、ルート) | Dev    | 0.5        | DEP-01     |                                                                         |
| DEP-05  | 7        | Render: フロントエンド 環境変数設定 (REACT_APP_API_URL)                      | Dev    | 0.2        | DEP-02, DEP-04 | バックエンドのURLを設定                                                  |
| DEP-06  | 7        | Render: バックエンド 環境変数 FRONTEND_URL 更新                              | Dev    | 0.1        | DEP-04     | フロントエンドのURLを設定                                                  |
| DEP-07  | 7        | デプロイ後の動作確認・デバッグ                                                | Dev    | 0.5-1.0    | DEP-06     | CORS, API接続, 機能全般                                                  |
| **UI-01** | 8        | UIライブラリ選定・導入 (MUI, Chakra UI など)                                 | Dev    | 1.0-2.0    | -          | オプション                                                               |
| UI-02   | 8        | 主要コンポーネントをUIライブラリで置き換え                                    | Dev    | 2.0-3.0    | UI-01      | 見た目の統一                                                             |
| ...     | ...      | ...                                                                         | ...    | ...        | ...        |                                                                         |

## 6. リスク管理 (更新)

| リスク項目                                | 発生可能性 | 影響度 | 対応策・軽減策                                                                                                                               |
| :---------------------------------------- | :--------- | :----- | :------------------------------------------------------------------------------------------------------------------------------------------- |
| Gemini API 応答不安定/形式不一致         | 中         | 高     | プロンプト調整(JSON指示強化), バックエンドでの応答パース処理強化(エラーハンドリング), リトライ処理検討                                      |
| Gemini API 利用料金超過                  | 中         | 中     | 利用状況モニタリング, API呼び出し頻度最適化, 効率的なモデル検討, 予算アラート設定                                                              |
| **デプロイ環境での設定ミス**            | **高**     | **高** | **環境変数(APIキー, URL)の確認徹底, CORS設定確認, ビルド/スタートコマンド確認, Renderログ詳細確認**                                         |
| **デプロイ環境でのパフォーマンス問題**    | **中**     | **中** | **Renderのプラン確認(無料枠制限), コードの起動時処理見直し, Gunicorn設定調整検討**                                                              |
| テキストクレンジングの精度不足          | 中         | 中     | `text_processing.py` のルールを多様な入力でテスト・改善。AIによるクレンジング(アプローチ2)も再検討。                                         |
| CSV文字化け (Excelでの自動認識失敗)   | 中         | 低     | BOM付きUTF-8で出力。UIにExcelでの正しい開き方を注釈表示。運用でカバー。                                                                        |
| ... (他は前回と同様) ...                  |            |        |                                                                                                                                              |

## 7. テスト計画 (変更なし)
...
## 8. リリース計画 (デプロイする場合) (変更なし)
...